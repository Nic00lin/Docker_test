# Развертывание WordPress с использованием Docker и Docker-compose.
Этот репозиторий поможет вам развернуть тестовое окружение для WordPress с использованием Docker-compose, а также на настройку Nginx в качестве обратного прокси с SSL для WordPress. Кроме того, он включает в себя настройку контейнера MySQL для базы данных WordPress и интеграцию Grafana и Prometheus для мониторинга контейнеров.
## Этап 1 Клонирование репозитория 
Пулим репозиторий к себе на рабочую станцию
```
git clone git@github.com:Nic00lin/Docker_test.git
```
Теперь перейдем в новую дирректорию 
```
cd Docker_test
```
Для того чтобы запустить наши контейнеры, воспользуемя инструментом docker-compose
```
docker-compose up -d
```
Проверьте, правильно ли запустились контейнеры, с помощью 
```
docker-compsoe ps
```
## Доступ к сервисам
Теперь перейдем к провере доступа к сервисам

WordPress: Откройте веб-браузер и перейдите по адресу http://localhost:8080

Grafana: Откройте веб-браузер и перейдите по адресу http://localhost:3000. Используйте стандартные учетные данные admin/admin.

Prometheus: Откройте веб-браузер и перейдите по адресу http://localhost:9090

Cadvisor: Откройте веб-браузер и перейдите по адресу http://localhost:8081

Теперь, когда вы убедились в доступности серверов, можно переходить к настройке.

## Настройка
Docker-compose.yml является конфигурационным файлом для управления многоконтейнерными приложениями с помощью Docker Compose/Он используется для определения служб, сетей, томов данных и других аспектов вашего приложения, а также для задания параметров запуска контейнеров. Вы можете указать нужные порты для ваших сервисов и установить необходимые параметры в виде томов, версий, зависимостей.

Настройки Nginx: Измените nginx/nginx.conf для настройки параметров Nginx, таких как SSL-сертификаты и конфигурации прокси. в соответствии с нужными вам портами.

Настройки MySQL: Настройки MySQL можно изменить в docker-compose.yml в разделе mysql.

Настройки Grafana: Настройки Grafana можно изменить через веб-интерфейс или обновить файл grafana/config/grafana.ini.

Настройки Prometheus: Настройки Prometheus можно обновить в prometheus/prometheus.yml.

## Генерация SSL сертификатов

Создайте приватный ключ:
```
openssl genrsa -out private.key 2048
```

Создайте запрос на сертификат (CSR):
```
openssl req -new -key private.key -out certificate.csr
```

При выполнении этой команды вам будут заданы несколько вопросов о подробностях сертификата. Ответьте на них соответствующим образом. Обязательно укажите корректный Common Name (CN), который обычно соответствует доменному имени вашего сайта.

Создайте самоподписанный сертификат:
```
openssl x509 -req -days 365 -in certificate.csr -signkey private.key -out certificate.crt
```

Теперь у вас есть два файла: private.key (приватный ключ) и certificate.crt (самоподписанный SSL сертификат). Эти файлы можно использовать для настройки SSL на вашем веб-сервере. Обратите внимание, что этот сертификат будет самоподписанным, поэтому в браузере будет отображаться предупреждение о ненадежности, если вы используете его для вашего сайта. Для реального продакшена вам следует получить SSL сертификат от доверенного удостоверяющего центра (CA).

SSL-сертификаты: Убедитесь, что вы заменили заполнители SSL-сертификатов в директории nginx/certs на свои собственные SSL-сертификаты для использования в продакшене.
